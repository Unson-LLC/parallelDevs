# アラート条件と意思決定フロー

## アラート条件

### 🔴 重大度：高（即座にユーザーへエスカレーション）

#### 1. セキュリティリスク検出
- 秘密鍵やパスワードのハードコーディング
- SQLインジェクション等の脆弱性
- 認証・認可の不備

#### 2. 破壊的変更の検出
- 既存APIの互換性を壊す変更
- データベーススキーマの破壊的変更
- 大規模なアーキテクチャ変更

#### 3. 重大なコンフリクト
- 複数エージェント間の解決不能なマージコンフリクト
- メインブランチとの大規模な乖離
- テストが永続的に失敗（30分以上）

### 🟡 重大度：中（状況報告と対応提案）

#### 1. パフォーマンス問題
- テスト実行時間の著しい増加（2倍以上）
- ビルド時間の大幅な増加
- メモリ使用量の異常増加

#### 2. エージェントの異常
- 3体以上のエージェントが同時に停止
- 30分以上進捗がない状態
- 同じエラーの繰り返し発生

#### 3. 品質基準未達
- テストカバレッジが60%未満
- リンターエラーが10件以上
- 循環的複雑度が基準値超過

### 🟢 重大度：低（自動対応後に報告）

#### 1. 軽微な問題
- 単一エージェントの一時的な停止
- 軽微なコンフリクト（自動解決可能）
- 一時的なテスト失敗

## 意思決定フロー

### 自動判断可能な事項

#### 1. 開発プロセス
- テストケースの追加・修正
- リファクタリングの実施
- コードフォーマットの適用

#### 2. エージェント管理
- エージェントの再起動
- 作業の再割り当て
- 並列度の調整

#### 3. 品質改善
- リンターエラーの修正
- 軽微なパフォーマンス改善
- ドキュメントの更新

### ユーザー確認が必要な事項

#### 1. アーキテクチャ
- フレームワークの変更
- データベース設計の変更
- API設計の大幅な変更

#### 2. 外部依存
- 新規ライブラリの追加
- 外部サービスとの連携
- ライセンスに関わる変更

#### 3. リスクを伴う変更
- セキュリティ関連の実装
- 課金・決済関連の実装
- ユーザーデータに関わる変更

## 役割分担と責任範囲

### ユーザーの役割

#### 1. 要件定義の提供
- 開発したい機能の要件をリポスト
- 必要に応じて詳細な仕様の補足

#### 2. 最終判断
- 実装方針の承認
- アーキテクチャ変更の決定
- 外部ライブラリ導入の可否

#### 3. エスカレーション対応
- アラートが上がった際の判断
- 重大な問題の解決方針決定